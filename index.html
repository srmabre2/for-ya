<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECURE FILE: BIRTHDAY_SURPRISE</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; background: #000; color: #0f0; font-family: 'Courier New', monospace; overflow: hidden; height: 100%; }

        /* Music Control */
        #music-control {
            position: fixed; top: 20px; right: 20px; z-index: 100;
            background: rgba(0, 255, 0, 0.2); border: 1px solid #0f0;
            color: #0f0; padding: 10px; cursor: pointer; border-radius: 5px;
        }

        /* Terminal Phase */
        #terminal { padding: 40px; font-size: 1.2rem; display: block; height: 100vh; overflow-y: auto; }
        .typing-text { margin-bottom: 10px; border-right: 2px solid #0f0; white-space: nowrap; overflow: hidden; animation: typing 2s steps(40, end), blink .75s step-end infinite; }
        
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink { from, to { border-color: transparent } 50% { border-color: #0f0 } }

        /* Scratch Phase */
        #scratch-container {
            display: none; position: relative; width: 100vw; height: 100vh;
            justify-content: center; align-items: center; background: #050505;
        }

        .content-behind {
            position: absolute; text-align: center; color: white; z-index: 1; padding: 20px;
            max-width: 800px;
        }

        /* Animated Story Styles */
        .story-item {
            opacity: 0; transform: translateY(20px); transition: all 1s ease;
            margin-bottom: 30px; border-left: 3px solid #0f0; padding-left: 15px; text-align: left;
        }
        .story-item.reveal { opacity: 1; transform: translateY(0); }
        .story-item h3 { color: #0f0; margin-bottom: 5px; }

        canvas { position: absolute; top: 0; left: 0; z-index: 2; cursor: crosshair; touch-action: none; }
    </style>
</head>
<body>

    <button id="music-control">ðŸ”ˆ Start Experience</button>
    
    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <div id="terminal">
        <div id="log"></div>
    </div>

    <div id="scratch-container">
        <div class="content-behind" id="story-wall">
            <h1 style="color: #0f0; font-size: 2.5rem; margin-bottom: 40px;">[DATA DECRYPTED]</h1>
            
            <div class="story-item">
                <h3>STORY_01: The Beginning</h3>
                <p>Remember when we first met at that coffee shop and I spilled my drink? Good times.</p>
            </div>

            <div class="story-item">
                <h3>STORY_02: The Inside Joke</h3>
                <p>"The Blue Umbrella." No one else gets it, and that's the best part.</p>
            </div>

            <div class="story-item">
                <h3>STORY_03: A Promise</h3>
                <p>Happy Birthday! Here's to 100 more adventures together.</p>
            </div>
            </div>
        <canvas id="scratchCanvas"></canvas>
    </div>

    <script>
        const music = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-control');
        const logElement = document.getElementById('log');

        // Toggle Music and Start Intro
        musicBtn.addEventListener('click', () => {
            if (music.paused) {
                music.play();
                musicBtn.textContent = "ðŸ”Š Music On";
                startTerminal();
            }
        });

        const terminalMessages = [
            "CONNECTING TO SECURE_SERVER_B-DAY...",
            "LOGIN: USER_FRIEND",
            "PASSWORD: ****************",
            "AUTHENTICATING...",
            "ACCESS GRANTED.",
            "WARNING: MEMORY OVERLOAD DETECTED...",
            "OPENING FILE: 'LIFE_WITHOUT_YOU_WOULD_SUCK.pdf'..."
        ];

        function startTerminal() {
            musicBtn.style.opacity = "0.3";
            let i = 0;
            const interval = setInterval(() => {
                if (i < terminalMessages.length) {
                    const p = document.createElement('p');
                    p.className = "typing-text";
                    p.textContent = "> " + terminalMessages[i];
                    logElement.appendChild(p);
                    i++;
                } else {
                    clearInterval(interval);
                    setTimeout(initScratchPhase, 1500);
                }
            }, 1200);
        }

        function initScratchPhase() {
            document.getElementById('terminal').style.display = 'none';
            document.getElementById('scratch-container').style.display = 'flex';
            
            const canvas = document.getElementById('scratchCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // Cover with "Digital Dust"
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = "bold 20px Courier New";
            ctx.fillStyle = "#0f0";
            ctx.textAlign = "center";
            ctx.fillText("ERASE TO DECRYPT MEMORIES", canvas.width/2, canvas.height/2);

            let isDrawing = false;

            function scratch(e) {
                if (!isDrawing) return;
                const x = (e.clientX || e.touches[0].clientX);
                const y = (e.clientY || e.touches[0].clientY);

                ctx.globalCompositeOperation = 'destination-out';
                ctx.beginPath();
                ctx.arc(x, y, 60, 0, Math.PI * 2);
                ctx.fill();
                
                // Reveal story items as they scratch
                checkReveal();
            }

            // Reveal animation for stories
            function checkReveal() {
                const stories = document.querySelectorAll('.story-item');
                stories.forEach((s, index) => {
                    setTimeout(() => { s.classList.add('reveal'); }, index * 400);
                });
            }

            canvas.addEventListener('mousedown', () => isDrawing = true);
            canvas.addEventListener('mouseup', () => isDrawing = false);
            canvas.addEventListener('mousemove', scratch);
            canvas.addEventListener('touchstart', () => isDrawing = true);
            canvas.addEventListener('touchend', () => isDrawing = false);
            canvas.addEventListener('touchmove', scratch);
        }
    </script>
</body>
</html>
